(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{BdQk:function(l,n,e){"use strict";e.d(n,"a",(function(){return h})),e.d(n,"b",(function(){return F}));var t=e("8Y7J"),i=e("SVse"),o=e("tW7o"),u=e("mviv"),s=e("nWGD"),a=e("3+oq"),d=e("LvKh"),r=e("dYC4"),c=e("isiS"),h=(e("k5h5"),e("1EJS"),e("tZre"),e("mTci"),e("iInd"),e("sjK5"),t["\u0275crt"]({encapsulation:0,styles:[["#image_fluid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-right-radius:5px;border-top-left-radius:5px;height:82px;width:134px}#image_fluid[_ngcontent-%COMP%]   #img_text[_ngcontent-%COMP%]{background-color:#000;border-left:5px solid #00f;bottom:auto;top:4px;border-radius:0}#image_fluid[_ngcontent-%COMP%]   #img_text[_ngcontent-%COMP%], #image_fluid[_ngcontent-%COMP%]   #img_textSpeaker[_ngcontent-%COMP%]{position:absolute;color:#fff;background-image:none;padding:5px}#image_fluid[_ngcontent-%COMP%]   #img_textSpeaker[_ngcontent-%COMP%]{text-align:center;font-size:12px;background-color:#898d69;background-color:#000;border-bottom-right-radius:0;border-bottom-left-radius:0;height:auto;font-weight:500;bottom:4px;left:47px;border-left:5px solid #00f}#img_banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}#img_banner[_ngcontent-%COMP%]   #img_icons[_ngcontent-%COMP%]{text-align:center;padding:2px}#img_banner[_ngcontent-%COMP%]   #img_icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;padding:10px;color:rgba(52,47,47,.74);border-radius:30px;box-shadow:0 0 11px rgba(0,0,0,.13);margin:6px;background:#fff}#img_iconss[_ngcontent-%COMP%]{text-align:center;padding:2px;position:absolute;bottom:0;z-index:99}#img_iconss[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;padding:10px;color:rgba(52,47,47,.74);border-radius:30px;box-shadow:0 0 11px rgba(0,0,0,.13);margin:6px;background:#fff}.mylocal[_ngcontent-%COMP%]{background-color:#fff;padding:5px;width:65%}.local[_ngcontent-%COMP%]{height:225px}.remote[_ngcontent-%COMP%]{width:20vw;height:20vh}.remote[_ngcontent-%COMP%], .remote1[_ngcontent-%COMP%]{top:0;left:0;right:1rem;bottom:1rem;border-radius:5px;overflow:hidden;z-index:1}.remote1[_ngcontent-%COMP%]{width:100%;height:37ch}"]],data:{}}));function g(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"img",[["alt",""],["class","img-fluid"],["style","background: white;\n                    padding: 10px;"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,0,0,t["\u0275inlineInterpolate"](1,"",n.component.banner,""))}))}function m(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"]],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleVolume()&&t),t}),null,null))],null,(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.volume,""))}))}function f(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"]],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleVideo()&&t),t}),null,null))],null,(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.video,""))}))}function p(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"div",[["id","img_icons"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"i",[],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleConnection()&&t),t}),null,null)),t["\u0275did"](3,278528,null,0,i.NgStyle,[t.ElementRef,t.KeyValueDiffers,t.Renderer2],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](4,{color:0}),(l()(),t["\u0275and"](16777216,null,null,1,null,m)),t["\u0275did"](6,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,f)),t["\u0275did"](8,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component,t=l(n,4,0,e.connection?"red":"#342f2fbd");l(n,3,0,t),l(n,6,0,e.connection),l(n,8,0,e.connection)}),(function(l,n){l(n,2,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.callConnect,""))}))}function v(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,8,"vg-player",[["style","height:370px"]],[[2,"fullscreen",null],[2,"native-fullscreen",null],[2,"controls-hidden",null],[4,"z-index",null]],null,null,o.b,o.a)),t["\u0275prd"](512,null,u.VgAPI,u.VgAPI,[]),t["\u0275prd"](512,null,s.VgFullscreenAPI,s.VgFullscreenAPI,[]),t["\u0275prd"](512,null,a.VgControlsHidden,a.VgControlsHidden,[]),t["\u0275did"](5,1228800,null,1,d.VgPlayer,[t.ElementRef,u.VgAPI,s.VgFullscreenAPI,a.VgControlsHidden],null,null),t["\u0275qud"](603979776,1,{medias:1}),(l()(),t["\u0275eld"](7,0,[["myMedia",1]],0,2,"video",[["autoplay","true"],["controls",""],["preload","auto"],["type","video/mp4"],["vg-responsive","false"]],[[8,"poster",4]],null,null,null,null)),t["\u0275did"](8,212992,[[1,4]],0,r.VgMedia,[u.VgAPI,t.ChangeDetectorRef],{vgMedia:[0,"vgMedia"]},null),t["\u0275did"](9,737280,null,0,c.VgHLS,[t.ElementRef,u.VgAPI],{vgHls:[0,"vgHls"]},null)],(function(l,n){var e=n.component;l(n,8,0,t["\u0275nov"](n,7)),l(n,9,0,e.videoPlayer)}),(function(l,n){var e=n.component;l(n,1,0,t["\u0275nov"](n,5).isFullscreen,t["\u0275nov"](n,5).isNativeFullscreen,t["\u0275nov"](n,5).areControlsHidden,t["\u0275nov"](n,5).zIndex),l(n,7,0,t["\u0275inlineInterpolate"](1,"",e.banner,""))}))}function _(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","col-md-8 col-xl-8"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,7,"div",[["class","col-md-12 col-xl-12 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,6,"div",[["id","img_banner"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,g)),t["\u0275did"](5,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,p)),t["\u0275did"](7,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](9,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,5,0,!e.showVideo&&e.speaker_id===e.user_id),l(n,7,0,e.speaker_id===e.user_id&&"live"===e.status),l(n,9,0,e.speaker_id!==e.user_id)}),null)}function b(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","video-chat mylocal"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"div",[["class","local"],["id","agora_local"]],null,null,null,null,null))],null,null)}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"]],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleVolume()&&t),t}),null,null))],null,(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.volume,""))}))}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"]],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleVideo()&&t),t}),null,null))],null,(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.video,""))}))}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"div",[["id","img_iconss"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"i",[],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleConnection()&&t),t}),null,null)),t["\u0275did"](3,278528,null,0,i.NgStyle,[t.ElementRef,t.KeyValueDiffers,t.Renderer2],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](4,{color:0}),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](6,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](8,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component,t=l(n,4,0,e.connection?"red":"#342f2fbd");l(n,3,0,t),l(n,6,0,e.connection),l(n,8,0,e.connection)}),(function(l,n){l(n,2,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.callConnect,""))}))}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","col-md-3 col-xl-3"],["style","position: fixed; bottom: 0; z-index: 1; left: 0;"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](2,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](4,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,e.showVideo),l(n,4,0,e.speaker_id===e.user_id&&"live"===e.status)}),null)}function V(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["No Speaker is available."]))],null,null)}function w(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","col-md-6 col-xl-6 p-1 mb-3"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["id","image_fluid"],["style","text-align: center;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"img",[["alt",""],["class","img-fluid"],["style","width: 60%;\n                    height: 150px;"]],[[8,"src",4]],null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"div",[["id","img_textSpeaker"]],[[8,"title",0]],null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""]))],null,(function(l,n){l(n,2,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.image,"")),l(n,3,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.name,"")),l(n,4,0,n.context.$implicit.name)}))}function x(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","col-12 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Speakers"])),(l()(),t["\u0275and"](16777216,null,null,1,null,V)),t["\u0275did"](5,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,w)),t["\u0275did"](7,278528,null,0,i.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,5,0,0===e.session_speakers.length),l(n,7,0,e.session_speakers)}),null)}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","col-md-4 col-xl-4"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,x)),t["\u0275did"](2,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,!n.component.showVideo)}),null)}function M(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","col-12 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Waiting for other speakers to join the call."]))],null,null)}function P(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","col-md-6 col-xl-6 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["id","image_fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"div",[["class","img-fluid remote1"]],[[8,"id",0]],null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"div",[["id","img_text"]],[[8,"title",0]],null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.id),l(n,3,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.name,"")),l(n,4,0,n.context.$implicit.name)}))}function y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,P)),t["\u0275did"](2,278528,null,0,i.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){l(n,2,0,n.component.remoteCalls)}),null)}function O(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","col-md-4 col-xl-4 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["id","image_fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"div",[["class","img-fluid remote1"]],[[8,"id",0]],null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"div",[["id","img_text"]],[[8,"title",0]],null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.id),l(n,3,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.name,"")),l(n,4,0,n.context.$implicit.name)}))}function N(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,O)),t["\u0275did"](2,278528,null,0,i.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){l(n,2,0,n.component.remoteCalls)}),null)}function T(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","row d-flex justify-content-center"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","col-12 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Speakers"])),(l()(),t["\u0275and"](16777216,null,null,1,null,M)),t["\u0275did"](5,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,y)),t["\u0275did"](7,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,N)),t["\u0275did"](9,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,5,0,0===e.remoteCalls.length),l(n,7,0,1===e.remoteCalls.length),l(n,9,0,e.remoteCalls.length>2||2===e.remoteCalls.length)}),null)}function A(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","col-md-12 col-xl-12"],["style","padding: 5px 7%;"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](2,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.component.showVideo)}),null)}function F(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,_)),t["\u0275did"](2,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](4,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,k)),t["\u0275did"](6,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,A)),t["\u0275did"](8,16384,null,0,i.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,!e.showVideo),l(n,4,0,e.showVideo),l(n,6,0,!e.showVideo),l(n,8,0,e.showVideo)}),null)}},k5h5:function(l,n,e){"use strict";e.d(n,"a",(function(){return s}));var t=e("1EJS"),i=e("s7LF"),o=e("AytR"),u=e("b5Gg");class s{constructor(l,n,e,t,s){this.agoraService=l,this.messageService=n,this._fd=e,this.route=t,this.chat=s,this.RTMclient=u.createInstance(o.a.agora?o.a.agora.appId:""),this.volume="microphone",this.video="video",this.videoBoolean=!1,this.volumeBoolean=!1,this.message={},this.videoStatus=!1,this.showVideo=!1,this.callConnect="phone",this.connection=!1,this.session_speakers=[],this.approvedAudience=[],this.approvedStatus=!1,this.disableEnableVolume=!1,this.disableEnableVideo=!1,this.appId=new i.f(o.a.agora?o.a.agora.appId:""),this.channel=new i.f,this.remoteCalls=[],this.connected=!1,this.published=!1,this.localStreams={camera:{id:"",stream:{}},screen:{id:"",stream:{}}},this.role_id=2,this.uid=Math.floor(100*Math.random()),this.client=this.agoraService.createClient({mode:"rtc",codec:"h264"}),this.screenClient=this.agoraService.createClient({mode:"rtc",codec:"h264"}),this.assignClientHandlers()}ngOnInit(){let l=localStorage.getItem("token");this.user_id=JSON.parse(localStorage.getItem("user_id")),this.chat.getconnect(l),this.chat.getResponse(l).subscribe(l=>{console.log("data",l),l==this.user_id+"_m"&&(this.volumeBoolean=!this.volumeBoolean,this.volume="microphone-slash",this.localStream.muteAudio()),l==this.user_id+"_um"&&(this.volumeBoolean=!this.volumeBoolean,this.volume="microphone",this.localStream.unmuteAudio()),l==this.user_id+"_von"&&(this.videoBoolean=!this.videoBoolean,this.localStream.unmuteVideo(),this.video="video"),l==this.user_id+"_voff"&&(this.videoBoolean=!this.videoBoolean,this.localStream.muteVideo(),this.video="video-slash"),l==this.user_id+"_end"&&(this.volume="microphone",this.video="video",this.callConnect="phone",this.leave())}),this.url=window.location.href,console.log(this.url,"baba"),1===this.role_id?this.route.params.subscribe(l=>{this.status=l.status}):this.route.queryParams.subscribe(l=>{this.status=l.status}),this.getRaiseHandList(),this.user_id=JSON.parse(localStorage.getItem("user_id")),this.uid=this.user_id,this.banner=localStorage.getItem("banner"),this.videoPlayer=localStorage.getItem("video-player"),this.session_token=localStorage.getItem("session_token");let n=JSON.parse(localStorage.getItem("session-speakers"));this.channel=new i.f(this.session_token);const e=n.some(l=>l.id===this.user_id);e||(this.speaker_id=null,this.session_speakers=n.filter(l=>l.id!==this.user_id)),e&&(this.speaker_id=this.user_id,this.session_speakers=n.filter(l=>l.id!==this.user_id))}getShortName(l){return l.split(" ").map(l=>l[0]).join("")}startCall(){this.videoBoolean=!1,this.volumeBoolean=!1,this.client.init(this.appId.value,()=>{console.log("Initialized successfully"),this.showVideo=!0,this.join()},()=>console.log("Could not initialize")),this.RTMclient.on("ConnectionStateChange",(l,n)=>{console.log("on connection state changed to "+l+" reason: "+n)})}toggleConnection(){this.connection=!this.connection,this.connection?(this.callConnect="phone-slash",this.client.init(this.appId.value,()=>{console.log("Initialized successfully"),this.showVideo=!0,this.join()},()=>console.log("Could not initialize"))):(this.callConnect="phone",this.leave())}join(){this.client.join(null,this.channel.value,this.uid,()=>{this.localStream=this.agoraService.createStream({streamID:this.uid,audio:!0,video:!0,screen:!1}),this.assignLocalStreamHandlers(),this.init(),this.RTMclient.login({token:null,uid:"mod"+this.user_id}).then(()=>{console.log("AgoraRTM client login success")}).catch(l=>{console.log("AgoraRTM client login failure",l)})})}publish(){this.videoStatus=!0,this.client.publish(this.localStream,l=>console.log("Publish local stream error: "+l))}unpublish(){this.videoStatus=!1,this.client.unpublish(this.localStream,l=>console.error("unpublish the call- ",this.localStream)),this.published=!1}leave(){this.connected?this.client.leave(()=>{if(console.log("Left the channel successfully"),this.unpublish(),this.videoBoolean=!1,this.volumeBoolean=!1,this.disableEnableVideo=!1,this.disableEnableVolume=!1,this.volume="microphone",this.video="video",this.connection=!1,this.localStream.stop(),this.localStream.close(),this.connected=!1,this.remoteCalls=[],this.showVideo=!1,1===this.role_id){const l=new FormData;this.route.params.subscribe(n=>{l.append("session_id",n.session_id),l.append("user_id",n.user_id),l.append("status","deleted"),this._fd.approveAudienceCall(l).subscribe(l=>{this.getRaiseHandList()})})}this.RTMclient.logout()},l=>{console.log("Leave channel failed")}):this.agoraService.AgoraRTC.Logger.warning("Local client is not connected to channel.")}init(){this.localStream.init(()=>{console.log("getUserMedia successfully"),this.localStream.play("agora_local"),this.connected=!0,this.publish()},l=>console.log("getUserMedia failed",l))}assignLocalStreamHandlers(){this.localStream.on(t.d.MediaAccessAllowed,()=>{console.log("accessAllowed")}),this.localStream.on(t.d.MediaAccessDenied,()=>{console.log("accessDenied")})}assignClientHandlers(){this.client.on(t.a.LocalStreamPublished,l=>{this.published=!0,console.log("Publish local stream successfully")}),this.client.on(t.a.Error,l=>{console.log("Got error msg:",l.reason),"DYNAMIC_KEY_TIMEOUT"===l.reason&&this.client.renewChannelKey("",()=>console.log("Renewed the channel key successfully."),l=>console.error("Renew channel key failed: ",l))}),this.client.on(t.a.RemoteStreamAdded,l=>{this.client.subscribe(l.stream,{audio:!0,video:!0},l=>{console.log("Subscribe stream failed",l)})}),this.RTMclient.on("MessageFromPeer",(l,n)=>{switch(console.log("message "+l.text+" peerId"+n),l.text){case"m":console.log("squick toggle the mic"),1===this.role_id&&(this.disableEnableVolume=!this.disableEnableVolume),this.toggleVolume();break;case"v":console.log("quick toggle the video"),1===this.role_id&&(this.disableEnableVideo=!this.disableEnableVideo),this.toggleVideo();break;case"q":console.log("so sad to see you quit the channel"),this.volume="microphone",this.video="video",this.callConnect="phone",this.leave()}}),this.client.on(t.a.RemoteStreamSubscribed,l=>{const n=l.stream,e=this.getRemoteId(n);if(e){this.remoteCalls.push({id:e,name:""});for(let n=0;n<this.remoteCalls.length;n++)this.session_speakers.forEach(l=>{this.remoteCalls[n].id==="agora_remote-"+l.id&&(this.remoteCalls[n].name=l.name)}),this.approvedAudience.forEach(l=>{this.remoteCalls[n].id==="agora_remote-"+l.user_id&&(this.remoteCalls[n].name="Audience: "+l.name)});console.log("ladfaf",this.approvedAudience),this.remoteCalls.forEach(l=>{console.log("remote",l),this.session_speakers.forEach(n=>{l==="agora_remote-"+n.id&&(this.remoteName=n.name)})});let l=this.remoteCalls.reduce((l,n)=>(l.some(l=>l.id===n.id&&l.name===n.name)||l.push(n),l),[]);this.remoteCalls=l,setTimeout(()=>n.play(e),1e3)}}),this.client.on(t.a.RemoteStreamRemoved,l=>{const n=l.stream;n&&(n.stop(),this.remoteCalls=[],console.log(`Remote stream is removed ${n.getId()}`))}),this.client.on(t.a.PeerLeave,l=>{const n=l.stream;n&&(n.stop(),this.remoteCalls=this.remoteCalls.filter(l=>l.id!==`${this.getRemoteId(n)}`),console.log(`${l.uid} left from this channel`))})}getRemoteId(l){return`agora_remote-${l.getId()}`}toggleVolume(){this.volumeBoolean=!this.volumeBoolean,console.log("volumeboolean",this.volumeBoolean),this.volumeBoolean?(this.volume="microphone-slash",this.localStream.muteAudio()):(this.volume="microphone",this.localStream.unmuteAudio())}toggleVideo(){this.videoBoolean=!this.videoBoolean,this.videoBoolean?(this.localStream.muteVideo(),this.video="video-slash"):(this.localStream.unmuteVideo(),this.video="video")}initScreenShare(){this.screenClient.init(this.appId.value,()=>{console.log("AgoraRTC screenClient Initialized successfully")},()=>console.log("[ERROR] : AgoraRTC screenClient init failed"))}toggleShareScreen(){this.initScreenShare()}raiseHandrequestToModeratorCall(){const l=JSON.parse(localStorage.getItem("logindata")),n=new FormData;this.route.params.subscribe(e=>{n.append("session_id",e.session_id),n.append("user_id",e.user_id),n.append("name",l.name),n.append("mobile",l.phone),this._fd.raiseHandRequestToModerator(n).subscribe(l=>{console.log("raise",l),this.getRaiseHandList()})})}getRaiseHandList(){1===this.role_id&&this.route.params.subscribe(l=>{setInterval(()=>{this._fd.getRaiseHandPendingList(l.session_id).subscribe(l=>{this.approvedAudience=l.result;const n=l.result.some(l=>l.user_id===this.user_id);n&&l.result.forEach(l=>{l.user_id===this.user_id&&(this.requestStatus=l.status)}),n||(this.requestStatus="none"),0===this.approvedAudience.length&&(this.requestStatus="none")}),"approved"===this.requestStatus&&clearInterval()},1e4)}),2===this.role_id&&this.route.queryParams.subscribe(l=>{this._fd.getRaiseHandPendingList(l.session_id).subscribe(l=>{this.approvedAudience=l.result})})}ngOnDestroy(){console.log("dosconnect"),this.leave()}}},wc44:function(l,n,e){"use strict";e.d(n,"a",(function(){return t}));class t{}}}]);