function _classCallCheck(l,n){if(!(l instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(l,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function _createClass(l,n,e){return n&&_defineProperties(l.prototype,n),e&&_defineProperties(l,e),l}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{BdQk:function(l,n,e){"use strict";e.d(n,"a",(function(){return f})),e.d(n,"b",(function(){return E}));var t=e("8Y7J"),o=e("SVse"),i=e("tW7o"),u=e("mviv"),a=e("nWGD"),s=e("3+oq"),r=e("LvKh"),c=e("dYC4"),d=e("isiS"),f=(e("k5h5"),e("1EJS"),e("tZre"),e("mTci"),e("iInd"),e("sjK5"),t["\u0275crt"]({encapsulation:0,styles:[["#image_fluid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-top-right-radius:5px;border-top-left-radius:5px;height:82px;width:134px}#image_fluid[_ngcontent-%COMP%]   #img_text[_ngcontent-%COMP%]{background-color:#000;border-left:5px solid #00f;bottom:auto;top:4px;border-radius:0}#image_fluid[_ngcontent-%COMP%]   #img_text[_ngcontent-%COMP%], #image_fluid[_ngcontent-%COMP%]   #img_textSpeaker[_ngcontent-%COMP%]{position:absolute;color:#fff;background-image:none;padding:5px}#image_fluid[_ngcontent-%COMP%]   #img_textSpeaker[_ngcontent-%COMP%]{text-align:center;font-size:12px;background-color:#898d69;background-color:#000;border-bottom-right-radius:0;border-bottom-left-radius:0;height:auto;font-weight:500;bottom:4px;left:4px;border-left:5px solid #00f}#img_banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}#img_banner[_ngcontent-%COMP%]   #img_icons[_ngcontent-%COMP%]{text-align:center;padding:2px}#img_banner[_ngcontent-%COMP%]   #img_icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;padding:10px;color:rgba(52,47,47,.74);border-radius:30px;box-shadow:0 0 11px rgba(0,0,0,.13);margin:6px;background:#fff}#img_iconss[_ngcontent-%COMP%]{text-align:center;padding:2px;position:absolute;bottom:0;z-index:99}#img_iconss[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;padding:10px;color:rgba(52,47,47,.74);border-radius:30px;box-shadow:0 0 11px rgba(0,0,0,.13);margin:6px;background:#fff}.mylocal[_ngcontent-%COMP%]{background-color:#fff;padding:5px;width:65%}.local[_ngcontent-%COMP%]{height:225px}.remote[_ngcontent-%COMP%]{width:20vw;height:20vh}.remote[_ngcontent-%COMP%], .remote1[_ngcontent-%COMP%]{top:0;left:0;right:1rem;bottom:1rem;border-radius:5px;overflow:hidden;z-index:1}.remote1[_ngcontent-%COMP%]{width:100%;height:37ch}"]],data:{}}));function g(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,0,"img",[["alt",""],["class","img-fluid"],["style","background: white;\n                    padding: 10px;"]],[[8,"src",4]],null,null,null,null))],null,(function(l,n){l(n,0,0,t["\u0275inlineInterpolate"](1,"",n.component.banner,""))}))}function m(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"]],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleVolume()&&t),t}),null,null))],null,(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.volume,""))}))}function h(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"]],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleVideo()&&t),t}),null,null))],null,(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.video,""))}))}function p(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"div",[["id","img_icons"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"i",[],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleConnection()&&t),t}),null,null)),t["\u0275did"](3,278528,null,0,o.NgStyle,[t.ElementRef,t.KeyValueDiffers,t.Renderer2],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](4,{color:0}),(l()(),t["\u0275and"](16777216,null,null,1,null,m)),t["\u0275did"](6,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,h)),t["\u0275did"](8,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component,t=l(n,4,0,e.connection?"red":"#342f2fbd");l(n,3,0,t),l(n,6,0,e.connection),l(n,8,0,e.connection)}),(function(l,n){l(n,2,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.callConnect,""))}))}function v(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,8,"vg-player",[["style","height:370px"]],[[2,"fullscreen",null],[2,"native-fullscreen",null],[2,"controls-hidden",null],[4,"z-index",null]],null,null,i.b,i.a)),t["\u0275prd"](512,null,u.VgAPI,u.VgAPI,[]),t["\u0275prd"](512,null,a.VgFullscreenAPI,a.VgFullscreenAPI,[]),t["\u0275prd"](512,null,s.VgControlsHidden,s.VgControlsHidden,[]),t["\u0275did"](5,1228800,null,1,r.VgPlayer,[t.ElementRef,u.VgAPI,a.VgFullscreenAPI,s.VgControlsHidden],null,null),t["\u0275qud"](603979776,1,{medias:1}),(l()(),t["\u0275eld"](7,0,[["myMedia",1]],0,2,"video",[["autoplay","true"],["controls",""],["preload","auto"],["type","video/mp4"],["vg-responsive","false"]],[[8,"poster",4]],null,null,null,null)),t["\u0275did"](8,212992,[[1,4]],0,c.VgMedia,[u.VgAPI,t.ChangeDetectorRef],{vgMedia:[0,"vgMedia"]},null),t["\u0275did"](9,737280,null,0,d.VgHLS,[t.ElementRef,u.VgAPI],{vgHls:[0,"vgHls"]},null)],(function(l,n){var e=n.component;l(n,8,0,t["\u0275nov"](n,7)),l(n,9,0,e.videoPlayer)}),(function(l,n){var e=n.component;l(n,1,0,t["\u0275nov"](n,5).isFullscreen,t["\u0275nov"](n,5).isNativeFullscreen,t["\u0275nov"](n,5).areControlsHidden,t["\u0275nov"](n,5).zIndex),l(n,7,0,t["\u0275inlineInterpolate"](1,"",e.banner,""))}))}function _(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","col-md-8 col-xl-8"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,7,"div",[["class","col-md-12 col-xl-12 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,6,"div",[["id","img_banner"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,g)),t["\u0275did"](5,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,p)),t["\u0275did"](7,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,v)),t["\u0275did"](9,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,5,0,!e.showVideo&&e.speaker_id===e.user_id),l(n,7,0,e.speaker_id===e.user_id&&"live"===e.status),l(n,9,0,e.speaker_id!==e.user_id)}),null)}function b(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"div",[["class","video-chat mylocal"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"div",[["class","local"],["id","agora_local"]],null,null,null,null,null))],null,null)}function C(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"]],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleVolume()&&t),t}),null,null))],null,(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.volume,""))}))}function I(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,0,"i",[["aria-hidden","true"]],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleVideo()&&t),t}),null,null))],null,(function(l,n){l(n,1,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.video,""))}))}function R(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"div",[["id","img_iconss"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"span",[],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,2,"i",[],[[8,"className",0]],[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.toggleConnection()&&t),t}),null,null)),t["\u0275did"](3,278528,null,0,o.NgStyle,[t.ElementRef,t.KeyValueDiffers,t.Renderer2],{ngStyle:[0,"ngStyle"]},null),t["\u0275pod"](4,{color:0}),(l()(),t["\u0275and"](16777216,null,null,1,null,C)),t["\u0275did"](6,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,I)),t["\u0275did"](8,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component,t=l(n,4,0,e.connection?"red":"#342f2fbd");l(n,3,0,t),l(n,6,0,e.connection),l(n,8,0,e.connection)}),(function(l,n){l(n,2,0,t["\u0275inlineInterpolate"](1,"buttonFont fas fa-",n.component.callConnect,""))}))}function k(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","col-md-3 col-xl-3"],["style","position: fixed; bottom: 0; z-index: 1; left: 0;"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,b)),t["\u0275did"](2,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,R)),t["\u0275did"](4,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,e.showVideo),l(n,4,0,e.speaker_id===e.user_id&&"live"===e.status)}),null)}function S(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["No Speaker is available."]))],null,null)}function w(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","col-md-4 col-xl-4 p-1 mb-3"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["id","image_fluid"],["style","text-align: center;"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"img",[["alt",""],["class","img-fluid"],["style","width: 100%;\n                    height: 150px;"]],[[8,"src",4]],null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"div",[["id","img_textSpeaker"]],[[8,"title",0]],null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""]))],null,(function(l,n){l(n,2,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.image,"")),l(n,3,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.name,"")),l(n,4,0,n.context.$implicit.name)}))}function V(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","col-12 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Speakers"])),(l()(),t["\u0275and"](16777216,null,null,1,null,S)),t["\u0275did"](5,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,w)),t["\u0275did"](7,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,5,0,0===e.session_speakers.length),l(n,7,0,e.session_speakers)}),null)}function x(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","col-md-4 col-xl-4"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,V)),t["\u0275did"](2,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,!n.component.showVideo)}),null)}function y(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","col-12 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Waiting for other speakers to join the call."]))],null,null)}function P(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","col-md-6 col-xl-6 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["id","image_fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"div",[["class","img-fluid remote1"]],[[8,"id",0]],null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"div",[["id","img_text"]],[[8,"title",0]],null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.id),l(n,3,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.name,"")),l(n,4,0,n.context.$implicit.name)}))}function M(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,P)),t["\u0275did"](2,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){l(n,2,0,n.component.remoteCalls)}),null)}function O(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,4,"div",[["class","col-md-4 col-xl-4 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,3,"div",[["id","image_fluid"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,0,"div",[["class","img-fluid remote1"]],[[8,"id",0]],null,null,null,null)),(l()(),t["\u0275eld"](3,0,null,null,1,"div",[["id","img_text"]],[[8,"title",0]],null,null,null,null)),(l()(),t["\u0275ted"](4,null,["",""]))],null,(function(l,n){l(n,2,0,n.context.$implicit.id),l(n,3,0,t["\u0275inlineInterpolate"](1,"",n.context.$implicit.name,"")),l(n,4,0,n.context.$implicit.name)}))}function N(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,null,null,null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,O)),t["\u0275did"](2,278528,null,0,o.NgForOf,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["\u0275and"](0,null,null,0))],(function(l,n){l(n,2,0,n.component.remoteCalls)}),null)}function T(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,9,"div",[["class","row d-flex justify-content-center"]],null,null,null,null,null)),(l()(),t["\u0275eld"](1,0,null,null,2,"div",[["class","col-12 p-1"]],null,null,null,null,null)),(l()(),t["\u0275eld"](2,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),t["\u0275ted"](-1,null,["Speakers"])),(l()(),t["\u0275and"](16777216,null,null,1,null,y)),t["\u0275did"](5,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,M)),t["\u0275did"](7,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,N)),t["\u0275did"](9,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,5,0,0===e.remoteCalls.length),l(n,7,0,1===e.remoteCalls.length),l(n,9,0,e.remoteCalls.length>2||2===e.remoteCalls.length)}),null)}function A(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,2,"div",[["class","col-md-12 col-xl-12"],["style","padding: 5px 7%;"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,T)),t["\u0275did"](2,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,n.component.showVideo)}),null)}function E(l){return t["\u0275vid"](0,[(l()(),t["\u0275eld"](0,0,null,null,8,"div",[["class","row"]],null,null,null,null,null)),(l()(),t["\u0275and"](16777216,null,null,1,null,_)),t["\u0275did"](2,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,k)),t["\u0275did"](4,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,x)),t["\u0275did"](6,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null),(l()(),t["\u0275and"](16777216,null,null,1,null,A)),t["\u0275did"](8,16384,null,0,o.NgIf,[t.ViewContainerRef,t.TemplateRef],{ngIf:[0,"ngIf"]},null)],(function(l,n){var e=n.component;l(n,2,0,!e.showVideo),l(n,4,0,e.showVideo),l(n,6,0,!e.showVideo),l(n,8,0,e.showVideo)}),null)}},k5h5:function(l,n,e){"use strict";e.d(n,"a",(function(){return a}));var t=e("1EJS"),o=e("s7LF"),i=e("AytR"),u=e("b5Gg"),a=function(){function l(n,e,t,a,s){_classCallCheck(this,l),this.agoraService=n,this.messageService=e,this._fd=t,this.route=a,this.chat=s,this.RTMclient=u.createInstance(i.a.agora?i.a.agora.appId:""),this.volume="microphone",this.video="video",this.videoBoolean=!1,this.volumeBoolean=!1,this.message={},this.videoStatus=!1,this.showVideo=!1,this.callConnect="phone",this.connection=!1,this.session_speakers=[],this.approvedAudience=[],this.approvedStatus=!1,this.disableEnableVolume=!1,this.disableEnableVideo=!1,this.appId=new o.f(i.a.agora?i.a.agora.appId:""),this.channel=new o.f,this.remoteCalls=[],this.connected=!1,this.published=!1,this.localStreams={camera:{id:"",stream:{}},screen:{id:"",stream:{}}},this.role_id=2,this.uid=Math.floor(100*Math.random()),this.client=this.agoraService.createClient({mode:"rtc",codec:"h264"}),this.screenClient=this.agoraService.createClient({mode:"rtc",codec:"h264"}),this.assignClientHandlers()}return _createClass(l,[{key:"ngOnInit",value:function(){var l=this,n=localStorage.getItem("token");this.user_id=JSON.parse(localStorage.getItem("user_id")),this.chat.getconnect(n),this.chat.getResponse(n).subscribe((function(n){console.log("data",n),n==l.user_id+"_m"&&(l.volumeBoolean=!l.volumeBoolean,l.volume="microphone-slash",l.localStream.muteAudio()),n==l.user_id+"_um"&&(l.volumeBoolean=!l.volumeBoolean,l.volume="microphone",l.localStream.unmuteAudio()),n==l.user_id+"_von"&&(l.videoBoolean=!l.videoBoolean,l.localStream.unmuteVideo(),l.video="video"),n==l.user_id+"_voff"&&(l.videoBoolean=!l.videoBoolean,l.localStream.muteVideo(),l.video="video-slash"),n==l.user_id+"_end"&&(l.volume="microphone",l.video="video",l.callConnect="phone",l.leave())})),this.url=window.location.href,console.log(this.url,"baba"),1===this.role_id?this.route.params.subscribe((function(n){l.status=n.status})):this.route.queryParams.subscribe((function(n){l.status=n.status})),this.getRaiseHandList(),this.user_id=JSON.parse(localStorage.getItem("user_id")),this.uid=this.user_id,this.banner=localStorage.getItem("banner"),this.videoPlayer=localStorage.getItem("video-player"),this.session_token=localStorage.getItem("session_token");var e=JSON.parse(localStorage.getItem("session-speakers"));this.channel=new o.f(this.session_token);var t=e.some((function(n){return n.id===l.user_id}));t||(this.speaker_id=null,this.session_speakers=e.filter((function(n){return n.id!==l.user_id}))),t&&(this.speaker_id=this.user_id,this.session_speakers=e.filter((function(n){return n.id!==l.user_id})))}},{key:"getShortName",value:function(l){return l.split(" ").map((function(l){return l[0]})).join("")}},{key:"startCall",value:function(){var l=this;this.videoBoolean=!1,this.volumeBoolean=!1,this.client.init(this.appId.value,(function(){console.log("Initialized successfully"),l.showVideo=!0,l.join()}),(function(){return console.log("Could not initialize")})),this.RTMclient.on("ConnectionStateChange",(function(l,n){console.log("on connection state changed to "+l+" reason: "+n)}))}},{key:"toggleConnection",value:function(){var l=this;this.connection=!this.connection,this.connection?(this.callConnect="phone-slash",this.client.init(this.appId.value,(function(){console.log("Initialized successfully"),l.showVideo=!0,l.join()}),(function(){return console.log("Could not initialize")}))):(this.callConnect="phone",this.leave())}},{key:"join",value:function(){var l=this;this.client.join(null,this.channel.value,this.uid,(function(){l.localStream=l.agoraService.createStream({streamID:l.uid,audio:!0,video:!0,screen:!1}),l.assignLocalStreamHandlers(),l.init(),l.RTMclient.login({token:null,uid:"mod"+l.user_id}).then((function(){console.log("AgoraRTM client login success")})).catch((function(l){console.log("AgoraRTM client login failure",l)}))}))}},{key:"publish",value:function(){this.videoStatus=!0,this.client.publish(this.localStream,(function(l){return console.log("Publish local stream error: "+l)}))}},{key:"unpublish",value:function(){var l=this;this.videoStatus=!1,this.client.unpublish(this.localStream,(function(n){return console.error("unpublish the call- ",l.localStream)})),this.published=!1}},{key:"leave",value:function(){var l=this;this.connected?this.client.leave((function(){if(console.log("Left the channel successfully"),l.unpublish(),l.videoBoolean=!1,l.volumeBoolean=!1,l.disableEnableVideo=!1,l.disableEnableVolume=!1,l.volume="microphone",l.video="video",l.connection=!1,l.localStream.stop(),l.localStream.close(),l.connected=!1,l.remoteCalls=[],l.showVideo=!1,1===l.role_id){var n=new FormData;l.route.params.subscribe((function(e){n.append("session_id",e.session_id),n.append("user_id",e.user_id),n.append("status","deleted"),l._fd.approveAudienceCall(n).subscribe((function(n){l.getRaiseHandList()}))}))}l.RTMclient.logout()}),(function(l){console.log("Leave channel failed")})):this.agoraService.AgoraRTC.Logger.warning("Local client is not connected to channel.")}},{key:"init",value:function(){var l=this;this.localStream.init((function(){console.log("getUserMedia successfully"),l.localStream.play("agora_local"),l.connected=!0,l.publish()}),(function(l){return console.log("getUserMedia failed",l)}))}},{key:"assignLocalStreamHandlers",value:function(){this.localStream.on(t.d.MediaAccessAllowed,(function(){console.log("accessAllowed")})),this.localStream.on(t.d.MediaAccessDenied,(function(){console.log("accessDenied")}))}},{key:"assignClientHandlers",value:function(){var l=this;this.client.on(t.a.LocalStreamPublished,(function(n){l.published=!0,console.log("Publish local stream successfully")})),this.client.on(t.a.Error,(function(n){console.log("Got error msg:",n.reason),"DYNAMIC_KEY_TIMEOUT"===n.reason&&l.client.renewChannelKey("",(function(){return console.log("Renewed the channel key successfully.")}),(function(l){return console.error("Renew channel key failed: ",l)}))})),this.client.on(t.a.RemoteStreamAdded,(function(n){l.client.subscribe(n.stream,{audio:!0,video:!0},(function(l){console.log("Subscribe stream failed",l)}))})),this.RTMclient.on("MessageFromPeer",(function(n,e){switch(console.log("message "+n.text+" peerId"+e),n.text){case"m":console.log("squick toggle the mic"),1===l.role_id&&(l.disableEnableVolume=!l.disableEnableVolume),l.toggleVolume();break;case"v":console.log("quick toggle the video"),1===l.role_id&&(l.disableEnableVideo=!l.disableEnableVideo),l.toggleVideo();break;case"q":console.log("so sad to see you quit the channel"),l.volume="microphone",l.video="video",l.callConnect="phone",l.leave()}})),this.client.on(t.a.RemoteStreamSubscribed,(function(n){var e=n.stream,t=l.getRemoteId(e);if(t){l.remoteCalls.push({id:t,name:""});for(var o=function(n){l.session_speakers.forEach((function(e){l.remoteCalls[n].id==="agora_remote-"+e.id&&(l.remoteCalls[n].name=e.name)})),l.approvedAudience.forEach((function(e){l.remoteCalls[n].id==="agora_remote-"+e.user_id&&(l.remoteCalls[n].name="Audience: "+e.name)}))},i=0;i<l.remoteCalls.length;i++)o(i);console.log("ladfaf",l.approvedAudience),l.remoteCalls.forEach((function(n){console.log("remote",n),l.session_speakers.forEach((function(e){n==="agora_remote-"+e.id&&(l.remoteName=e.name)}))}));var u=l.remoteCalls.reduce((function(l,n){return l.some((function(l){return l.id===n.id&&l.name===n.name}))||l.push(n),l}),[]);l.remoteCalls=u,setTimeout((function(){return e.play(t)}),1e3)}})),this.client.on(t.a.RemoteStreamRemoved,(function(n){var e=n.stream;e&&(e.stop(),l.remoteCalls=[],console.log("Remote stream is removed ".concat(e.getId())))})),this.client.on(t.a.PeerLeave,(function(n){var e=n.stream;e&&(e.stop(),l.remoteCalls=l.remoteCalls.filter((function(n){return n.id!=="".concat(l.getRemoteId(e))})),console.log("".concat(n.uid," left from this channel")))}))}},{key:"getRemoteId",value:function(l){return"agora_remote-".concat(l.getId())}},{key:"toggleVolume",value:function(){this.volumeBoolean=!this.volumeBoolean,console.log("volumeboolean",this.volumeBoolean),this.volumeBoolean?(this.volume="microphone-slash",this.localStream.muteAudio()):(this.volume="microphone",this.localStream.unmuteAudio())}},{key:"toggleVideo",value:function(){this.videoBoolean=!this.videoBoolean,this.videoBoolean?(this.localStream.muteVideo(),this.video="video-slash"):(this.localStream.unmuteVideo(),this.video="video")}},{key:"initScreenShare",value:function(){this.screenClient.init(this.appId.value,(function(){console.log("AgoraRTC screenClient Initialized successfully")}),(function(){return console.log("[ERROR] : AgoraRTC screenClient init failed")}))}},{key:"toggleShareScreen",value:function(){this.initScreenShare()}},{key:"raiseHandrequestToModeratorCall",value:function(){var l=this,n=JSON.parse(localStorage.getItem("logindata")),e=new FormData;this.route.params.subscribe((function(t){e.append("session_id",t.session_id),e.append("user_id",t.user_id),e.append("name",n.name),e.append("mobile",n.phone),l._fd.raiseHandRequestToModerator(e).subscribe((function(n){console.log("raise",n),l.getRaiseHandList()}))}))}},{key:"getRaiseHandList",value:function(){var l=this;1===this.role_id&&this.route.params.subscribe((function(n){setInterval((function(){l._fd.getRaiseHandPendingList(n.session_id).subscribe((function(n){l.approvedAudience=n.result;var e=n.result.some((function(n){return n.user_id===l.user_id}));e&&n.result.forEach((function(n){n.user_id===l.user_id&&(l.requestStatus=n.status)})),e||(l.requestStatus="none"),0===l.approvedAudience.length&&(l.requestStatus="none")})),"approved"===l.requestStatus&&clearInterval()}),1e4)})),2===this.role_id&&this.route.queryParams.subscribe((function(n){l._fd.getRaiseHandPendingList(n.session_id).subscribe((function(n){l.approvedAudience=n.result}))}))}},{key:"ngOnDestroy",value:function(){console.log("dosconnect"),this.leave()}}]),l}()},wc44:function(l,n,e){"use strict";e.d(n,"a",(function(){return t}));var t=function l(){_classCallCheck(this,l)}}}]);